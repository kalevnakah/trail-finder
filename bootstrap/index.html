<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Trail Finder</title>
    <link rel="stylesheet" href="styles.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx"
      crossorigin="anonymous"
    />
  </head>
  <body
    class="bg-image bg-dark overlay-gradient has-bg-img rounded h-10rem my-2"
    style="
      background-image: url('trail.jpg');
      height: 100vh;
      background-repeat: no-repeat;
      background-size: cover;
    "
  >
    <h1 class="text-center py-3">Find Optimal Trail Route</h1>
      <!-- Button trigger modal -->
      <div class="mx-auto p-2" style="width: 200px;">
        <button type="button" class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="#exampleModal">
          Instructions
        </button>
      </div>


      <!-- Modal -->
      <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="exampleModalLabel">Instructions</h1>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <ol class="list-group list-group-numbered">
                <li class="list-group-item">
                  Upload ".geojson" files from Gaia GPS tracks that you recorded or
                  click "Load Samples" button to try it out.
                </li>
                <li class="list-group-item">
                  Give each trail a a starting and ending ID. Each trail should have at
                  least one point that matches another trail. If any the trails is
                  disconnected from the the rest of the trails, the program will not be
                  able to find a route.
                </li>
                <li class="list-group-item">
                  Click the "Find all Routes" button. Alternatively you can enter starting point and click "Find A Route".
                </li>
                <li class="list-group-item">
                  Once you have your route you can export it to a csv for safe keeping or to print it.</li>
                <li class="list-group-item">
                Check out the GitHub Repo and ReadMe for more information. <a href="https://github.com/kalevnakah/trail-finder">github.com/kalevnakah/trail-finder</a></li>
              </ol>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>


    </div>
    <div class="d-flex justify-content-between m-3">
      <div>
        <form method="post" enctype="multipart/form-data">
          <label for="formFileMultiple" class="form-label text-bg-light"
            >Upload Json or GeoJson files.</label
          >
          <div class="input-group">
            <input
              class="form-control"
              type="file"
              id="formFileMultiple"
              name="files[]"
              multiple
            />
            <input
              class="btn btn-primary"
              type="submit"
              value="Upload Files"
              name="submit"
            />
          </div>
        </form>
      </div>
      <div class="d-flex align-items-center">
        <button class="btn btn-sm btn-success ms-2" id="intersect-btn">
          Save Intersections
        </button>
        <button class="btn btn-sm btn-secondary ms-2" id="load-sample-btn">
          Load Sample Trails
        </button>
        <button class="btn btn-sm btn-danger ms-2" id="delete-all-btn">
          Delete All Trails
        </button>
      </div>
    </div>
    <div id="trailsList" class="table-responsive p-3"></div>
    <div class="d-flex justify-content-between mx-3">
      <div class="input-group">
        <input id="startingPoint" type="text" class="form-control-sm" />
        <button id="calculate-shortest-start-btn" class="btn btn-primary">
          Find A Route!
        </button>
      </div>
      <button id="calculate-shortest-btn" class="btn btn-secondary text-nowrap">
        Find All Routes!
      </button>
    </div>
    <label for="startingPoint" class="ms-3 p-0 text-light text-bg-dark"
      >Enter a starting Intersection</label
    >

    <div class="border border-secondary barder-4 bg-secondary m-3 p-1">
      <div
        id="route-spinner"
        class="d-none justify-content-center align-items-center text-warning m-3"
      >
        <div class="spinner-border" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>
    </div>

    <div id="routes" class="table-responsive p-3"></div>

    <div
      class="toast position-absolute top-0 end-0"
      id="save-toast"
      role="alert"
      aria-live="assertive"
      aria-atomic="true"
    >
      <div class="toast-header bg-success text-light">
        <strong class="me-auto"
          >Trails have been updated and saved to local storage.</strong
        >
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="toast"
          aria-label="Close"
        ></button>
      </div>
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
      crossorigin="anonymous"
    ></script>
    <script src="script.js"></script>
  </body>
</html>
